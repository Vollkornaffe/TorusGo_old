<!DOCTYPE html> 
<html> 
    <head>
        <meta charset=utf-8>
        <title>Testing</title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }
        </style>
        <script src="js/three.js"></script>
        <script src="js/Detector.js"></script>
        <script src="js/libs/stats.min.js"></script>
        <script src="js/generic_THREE_setup.js"></script>
        <script src="js/custom_THREE_setup.js"></script>
        <script src="js/game_logic.js"></script>
        <script src="js/torus.js"></script>
        <script src="js/mouseOver.js"></script>
    </head>
    <body>
        <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
            var container, stats;
            var camera, scene, renderer;
            var cameraSettings = {
                phi: 0,
                rho: 0,
                rad: 50
            };
            var mouse = new THREE.Vector2();
            var mouseMode = "select";
            var raycaster = new THREE.Raycaster();
            var currentSelection;
            var clock = new THREE.Clock();

            var torus_instance;

            init();
            animate();

            function render() {
                var delta = clock.getDelta();
                var time = clock.getElapsedTime() * 10;
                var timer = Date.now() * 0.0001;
                switch (mouseMode) {
                    case "camera":
                        cameraSettings.phi = mouse.x * 4;
                        cameraSettings.rho = -mouse.y;
                        camera.position.x = Math.cos(cameraSettings.rho) * Math.cos(cameraSettings.phi) * cameraSettings.rad;
                        camera.position.z = Math.cos(cameraSettings.rho) * Math.sin(cameraSettings.phi) * cameraSettings.rad;
                        camera.position.y = Math.sin(cameraSettings.rho) * cameraSettings.rad;
                        break;
                    case "select":
                        currentSelection = getSelectedPos(raycaster, torus_instance.mesh, mouse, camera);
                        break;
                }

                console.log(currentSelection);
                //console.log(mouse);

                camera.lookAt(scene.position);
                renderer.render( scene, camera );

                torus_instance.updateTorus();
            }
        </script>
    </body>
</html>
